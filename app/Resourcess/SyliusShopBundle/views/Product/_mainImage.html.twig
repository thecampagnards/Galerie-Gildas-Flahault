{% if product.imageByCode('main') is not null %}
    {% set source_path = product.imageByCode('main').path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% elseif product.images.first %}
    {% set source_path = product.images.first.path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% else %}
    {% set original_path = 'http://placehold.it/400x300' %}
    {% set path = original_path %}
{% endif %}

<img src="{{ path }}" alt="" class="ui bordered image" />
